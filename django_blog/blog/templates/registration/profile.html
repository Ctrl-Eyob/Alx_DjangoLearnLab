{% extends "blog/base.html" %}
{% load static %}

{% block title %}Profile - Django Blog{% endblock %}

{% block content %}
<div class="form-container">
    <h2>{{ user.username }}'s Profile</h2>
    
    <div class="profile-header">
        <div class="profile-picture-container">
            {% if user.profile.profile_picture %}
                <img src="{{ user.profile.profile_picture.url }}" alt="Profile Picture" class="profile-picture">
            {% else %}
                <div class="profile-picture-placeholder">
                    <span>{{ user.username|first|upper }}</span>
                </div>
            {% endif %}
        </div>
        <div class="profile-info">
            <h3>{{ user.get_full_name|default:user.username }}</h3>
            <p class="text-muted">{{ user.email }}</p>
        </div>
    </div>
    
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        
        <h3>Account Information</h3>
        {% for field in u_form %}
            <div class="form-group">
                {{ field.label_tag }}
                {{ field }}
                {% if field.errors %}
                    <small class="text-danger">{{ field.errors|striptags }}</small>
                {% endif %}
            </div>
        {% endfor %}
        
        <h3>Profile Information</h3>
        {% for field in p_form %}
            <div class="form-group">
                {{ field.label_tag }}
                {{ field }}
                {% if field.errors %}
                    <small class="text-danger">{{ field.errors|striptags }}</small>
                {% endif %}
            </div>
        {% endfor %}
        
        <button type="submit" class="btn btn-primary">Update Profile</button>
    </form>
    
    <div class="profile-actions">
        <a href="{% url 'post-list' %}" class="btn btn-secondary">Back to Home</a>
    </div>
</div>
{% endblock %}